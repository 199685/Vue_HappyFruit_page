(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-513ca788"],{"64bd":function(t,s,a){"use strict";a("ca1d")},"8cd9":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"container-fluid bg-cover sky-size",style:{backgroundImage:"url("+a("e16a")+")"}},[e("div",{staticClass:"container mt-1"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-11 col-md-12 text-center px-3 py-7",class:{"d-none":!t.zeroCarts}},[e("p",{staticClass:"mb-5 font-1"},[t._v("目前購物車沒有任何商品")]),e("div",{staticClass:"text-center"},[e("router-link",{attrs:{to:{path:"products"}}},[e("button",{staticClass:"btn new-btn new-btn-favourite",attrs:{type:"button"}},[t._v("逛逛商品")])])],1)]),e("div",{staticClass:"col-11 col-md-12 text-center px-3 py-7",class:{"d-none":t.zeroCarts}},[e("p",{staticClass:"mb-5 font-2"},[t._v("購物車")])])])])]),e("div",{staticClass:"container-30 container my-4"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-11 mb-5",class:{"d-none":t.zeroCarts}},[e("div",{staticClass:"accordion",attrs:{id:"accordionExample"}}),e("div",{staticClass:"card pb-1"},[e("div",{staticClass:"card-header d-sm-flex justify-content-between py-1",attrs:{id:"headingOne"}},[t._m(0),e("h2",{staticClass:"mb-0 pl-3 pl-sm-0 d-flex align-items-center titlefont"},[e("p",{staticClass:"d-inline-block mb-0 pr-3"},[t._v("應付金額")]),t._v("\n              "+t._s(t._f("currency")(t.total[0]||0))+"\n            ")])]),e("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[e("div",{staticClass:"shopping-table"},[e("table",{staticClass:"table"},[t._m(1),t._l(t.carts.carts,(function(s,a){return e("tr",{key:s.id},[e("td",{staticClass:"text-center",attrs:{width:"100"}},[e("i",{staticClass:"far fa-trash-alt pointer p-3",on:{click:function(e){return t.removeProduct(s,a)}}})]),e("td",{staticClass:"table-img"},[e("img",{staticClass:"img-fluid",attrs:{src:s.product.imageUrl,alt:s.product.title}})]),e("td",[t._v(t._s(s.product.title))]),e("td",[e("div",{staticClass:"d-flex"},[e("button",{staticClass:"count",attrs:{type:"button"},on:{click:function(a){t.quantity("minus",s),t.addChangeProducts(s)}}},[e("i",{staticClass:"fas fa-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.qty,expression:"product.qty"}],staticClass:"qtyInput__1dbgq ",attrs:{type:"number",min:"1",max:"200",name:"quantity"},domProps:{value:s.qty},on:{change:function(a){t.inputQuanproduct(s),t.addChangeProducts(s)},input:function(a){a.target.composing||t.$set(s,"qty",a.target.value)}}}),e("button",{staticClass:"count",attrs:{type:"button"},on:{click:function(a){t.quantity("plus",s),t.addChangeProducts(s)}}},[e("i",{staticClass:"fas fa-plus"})])])]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(s.product.price)))]),e("td",{staticClass:"text-right"},[t._v("\n                    "+t._s(t._f("currency")(s.product.price*s.qty))+"\n                  ")])])})),t._m(2),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("合計")]),e("th",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.total[0]||0)))])])],2)])])]),e("div",{staticClass:"text-right mt-2"},[e("button",{staticClass:"btn new-btn new-btn-checkout",attrs:{type:"button"},on:{click:function(s){return t.nextpage()}}},[t._v("\n            結帳去\n          ")])])])])])])},c=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h2",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link btn-block text-left",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[t._v("\n                顯示購物車細節"),a("i",{staticClass:"fas fa-angle-down ml-1 text-c1"})])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col",colspan:"3"}},[t._v("商品名稱")]),a("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[t._v("數量")]),a("th",{attrs:{scope:"col",width:"200"}},[t._v("單價")]),a("th",{attrs:{scope:"col",width:"200"}},[t._v("小計")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("tr",[a("th",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("運費")]),a("th",{staticClass:"text-right"},[t._v("$0")])])}],r=(a("ac6a"),{data:function(){return{cartsNumber:0,carts:[],total:[],changeProductsID:[],zeroCarts:!1}},methods:{getCarts:function(){var t=this,s=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart");s.$store.commit("UPDATELOADING",!0),s.$http.get(a).then((function(a){t.cartsNumber=a.data.data.carts.length,s.cartsNumber>0?s.zeroCarts=!1:s.zeroCarts=!0,s.carts=a.data.data,s.total=[a.data.data.total],s.getProducts()}))},quantity:function(t,s){var a=s;a.qty=parseInt(a.qty,10),"plus"===t?(a.qty+=1,this.total[0]+=parseInt(a.product.price,10)):a.qty>1&&(a.qty-=1,this.total[0]-=parseInt(a.product.price,10)),a.total=parseInt(a.product.price,10)*a.qty},inputQuanproduct:function(t){var s=this,a=t;(a.qty<=0||!a.qty)&&(a.qty=1);var e=this.total[0]-parseInt(a.total,10)+parseInt(a.product.price,10)*a.qty;s.$set(s.total,0,e),a.total=parseInt(a.product.price,10)*a.qty},removeProduct:function(t,s){var a=this;a.$store.commit("UPDATELOADING",!0),a.$store.dispatch("removeProduct",t.id),a.total[0]-=t.qty*t.product.price,this.removeChangeProducts(t.product_id,s),a.alertDisplay("".concat(t.product.title,"已移除購物車"),"warning"),a.cartsNumber-=1,0===a.cartsNumber&&(a.zeroCarts=!0),setTimeout((function(){a.$store.commit("UPDATELOADING",!1)}),300)},addChangeProducts:function(t){var s=this.changeProductsID.map((function(t){return t.product_id})),a=s.indexOf(t.product_id);if(a<0){var e={id:t.id,qty:t.qty,product_id:t.product_id};this.changeProductsID.push(e)}else this.changeProductsID[a].qty=t.qty},removeChangeProducts:function(t,s){var a=this.changeProductsID.map((function(t){return t.product_id})),e=a.indexOf(t);this.changeProductsID.splice(e,1),this.carts.carts.splice(s,1)},nextpage:function(){if(this.$store.state.run){var t=this;t.$store.commit("RUN",!1),this.changeProductsID.forEach((function(s){var a={product_id:s.product_id,qty:s.qty};t.$store.dispatch("addCart",{Newproduct:a}),t.$store.dispatch("removeProduct",s.id)})),setTimeout((function(){t.$store.commit("RUN",!0),t.$router.push("/checkout1")}),1e3)}},alertDisplay:function(t,s){var a=t,e=s;this.$dlg.toast(a,{messageType:e,closeTime:2,position:"topCenter",language:"en"})},getProducts:function(){this.$store.dispatch("getProducts")}},created:function(){this.getCarts()},computed:{products:function(){return this.$store.state.products}}}),n=r,i=(a("64bd"),a("2877")),o=Object(i["a"])(n,e,c,!1,null,"226e5a79",null);s["default"]=o.exports},ca1d:function(t,s,a){},e16a:function(t,s,a){t.exports=a.p+"img/bg-2.f1c858f8.jpg"}}]);
//# sourceMappingURL=chunk-513ca788.e23ec723.js.map