(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37c1f7ee"],{"10e9":function(t,e,a){},1799:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"mt-3",attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.getProducts(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return t.getProducts(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.getProducts(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},r=[],i={name:"Pagination",props:["pagination"],data:function(){return{}},methods:{getProducts:function(t){this.$emit("products-getProducts",t)}}},n=i,o=a("2877"),d=Object(o["a"])(n,s,r,!1,null,null,null);e["a"]=d.exports},"2feb":function(t,e,a){"use strict";a("10e9")},"8e6e":function(t,e,a){var s=a("5ca1"),r=a("990b"),i=a("6821"),n=a("11e9"),o=a("f1ae");s(s.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,s=i(t),d=n.f,l=r(s),c={},u=0;while(l.length>u)a=d(s,e=l[u++]),void 0!==a&&o(c,e,a);return c}})},"990b":function(t,e,a){var s=a("9093"),r=a("2621"),i=a("cb7c"),n=a("7726").Reflect;t.exports=n&&n.ownKeys||function(t){var e=s.f(i(t)),a=r.f;return a?e.concat(a(t)):e}},ade3:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}))},d8d4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[a("div",{staticClass:"loading-blue"},[a("div",{staticClass:"ldio-loading"},[a("div",[a("div")]),a("div",[a("div")]),a("div",[a("div")]),a("div",[a("div")]),a("div",[a("div")]),a("div",[a("div")]),a("div",[a("div")]),a("div",[a("div")])])])]),a("div",{staticClass:"table-responsive-md mt-7"},[a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.orders,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(t._f("date")(e.paid_date||e.create_at)))]),a("td",[t._v(t._s(e.user.email))]),a("td",[t._v(t._s(e.user.name))]),a("td",[t._v("\n            "+t._s(e.user.tel)+"\n          ")]),a("td",[a("ul",{staticClass:"list-unstyled"},t._l(e.products,(function(e){return a("li",{key:e.id,staticClass:"text-left"},[t._v("\n                "+t._s(e.product.title)+" "),a("span",{staticClass:"pl-1"},[t._v("數量：")]),t._v(" "+t._s(e.qty)+t._s(e.product.unit)+"\n              ")])})),0)]),a("td",{staticClass:"text-right"},[t._v("\n            "+t._s(t._f("currency")(e.total))+"\n          ")]),a("td",[e.is_paid?a("span",{staticClass:"text-success"},[t._v("已付款")]):a("span",{staticClass:"text-danger"},[t._v("未付款")])]),a("td",[a("div",{staticClass:"btn-group d-block d-md-flex",attrs:{role:"group","aria-label":"Third group"}},[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openModal("edit",e)}}},[t._v("\n                編輯\n              ")])])])])})),0)])]),a("Page",{attrs:{pagination:t.pagination},on:{"products-getProducts":t.getorders}}),a("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"paid_date"}},[t._v("購買日期")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.paid_date,expression:"paid_date"}],staticClass:"form-control",attrs:{type:"text",id:"paid_date",placeholder:"請輸入購買日期"},domProps:{value:t.paid_date},on:{input:function(e){e.target.composing||(t.paid_date=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"is_paid"}},[t._v("是否付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.is_paid,expression:"tempOrder.is_paid"}],staticClass:"form-control",attrs:{type:"text",id:"is_paid",placeholder:"請輸入是否付款"},domProps:{value:t.tempOrder.is_paid},on:{input:function(e){e.target.composing||t.$set(t.tempOrder,"is_paid",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"name"}},[t._v("客戶名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"請輸入客戶名稱"},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"tel"}},[t._v("聯絡電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.tel,expression:"tempOrder.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"tel",placeholder:"請輸入聯絡電話"},domProps:{value:t.tempOrder.user.tel},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"tel",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-8"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control",attrs:{type:"text",id:"email",placeholder:"請輸入Email"},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"total"}},[t._v("應付金額")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.total,expression:"tempOrder.total"}],staticClass:"form-control",attrs:{type:"number",id:"total",placeholder:"請輸入應付金額"},domProps:{value:t.tempOrder.total},on:{input:function(e){e.target.composing||t.$set(t.tempOrder,"total",e.target.value)}}})])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            取消\n          ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.upOrders}},[t._v("確認")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delorderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),t._m(3),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            取消\n          ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.upOrders()}}},[t._v("確認刪除")])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"120"}},[t._v("購買時間")]),a("th",{attrs:{width:"300"}},[t._v("Email")]),a("th",[t._v("客戶名稱")]),a("th",[t._v("聯絡電話")]),a("th",{staticClass:"min-width-350"},[t._v("購買款項")]),a("th",{attrs:{width:"100"}},[t._v("應付金額")]),a("th",[t._v("是否付款")]),a("th",{attrs:{width:"100"}},[t._v("編輯")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("訂單列表")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[t._v("\n          是否刪除 "),a("strong",{staticClass:"text-danger"}),t._v(" 商品(刪除後將無法恢復)。\n        ")])}],i=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),n=a("1799");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={data:function(){return{orders:[],pagination:{},tempOrder:{create_at:"",id:"",is_paid:"",message:"",paid_date:"",payment_method:"",products:{},total:"",user:{address:"",email:"",name:"",tel:""},num:""},paid_date:"",isNew:!1,isLoading:!1}},components:{Page:n["a"]},methods:{getorders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/admin/orders?page=").concat(t);e.isLoading=!0,e.$http.get(a).then((function(t){e.isLoading=!1,e.orders=t.data.orders,e.pagination=t.data.pagination}))},openModal:function(t,e){if("edit"===t){this.tempOrder=d({},e),this.isNew="edit";var a=new Date(1e3*this.tempOrder.paid_date),s=a.getFullYear(),r=a.getMonth()+1,i=a.getDate();r<10&&(r=0+String(r)),i<10&&(i=0+String(i)),this.paid_date="".concat(s,"-").concat(r,"-").concat(i)}"delete"!==this.isNew&&$("#orderModal").modal("show")},upOrders:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/admin/order"),a="put";"edit"===t.isNew&&(e="".concat(e,"/").concat(t.tempOrder.id)),t.$http[a](e,{data:t.tempOrder}).then((function(e){e.data.success&&("delete"!==t.isNew&&$("#orderModal").modal("hide"),t.getorders(t.pagination.current_page))}))}},created:function(){this.getorders()},watch:{paid_date:function(){var t=this;t.tempOrder.paid_date=Math.floor(new Date(t.paid_date).getTime()/1e3)}}},c=l,u=(a("2feb"),a("2877")),p=Object(u["a"])(c,s,r,!1,null,"61ad2f13",null);e["default"]=p.exports},f1ae:function(t,e,a){"use strict";var s=a("86cc"),r=a("4630");t.exports=function(t,e,a){e in t?s.f(t,e,r(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-37c1f7ee.3c3d9798.js.map